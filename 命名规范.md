## 命名通则

### 命名约定

**命名约定**

1.  用单下划线(\_)开头表示模块变量或函数是protected的(使用from module import \*时不会包含).
1.  用双下划线(\_\_)开头的实例变量或方法表示类内私有 或者 方法内私有.
1.  将相关的类和顶级函数放在同一个模块里. 不像Java, 没必要限制一个类一个模块.
1.  大小写
    * 对类名使用大写字母开头的单词(如CapWords, 即Pascal风格)
    * 模块名（文件名）应该用小写加下划线的方式(如lower\_with\_under.py)

备注：所谓"内部(Internal)"表示仅模块内可用, 或者, 在类内是保护或私有的.

注意：尽管已经有很多现存的模块（文件）使用类似于CapWords.py这样的命名, 但现在已经不鼓励这样做, 因为如果模块名碰巧和类名一致, 这会让人困扰.

**Python之父Guido推荐的规范，增补异常命名**

| Type                                                    | Public                                                     | Internal                                                                 |     |           |                      |                        |
| ------------------------------------------------------- | ---------------------------------------------------------- | ------------------------------------------------------------------------ | --- | --------- | -------------------- | ---------------------- |
| Modules Packages                                        | lower\_with\_under lower\_with\_under                      | \_lower\_with\_under                                                     |     |           |                      |                        |
| Exceptions                                             | XxxException                                              |   \_XxxException                                                         |     |           |                      |                        |
| Classes                                                 | CapWords                                                   | \_CapWords                                                               |     |           |                      |                        |
| Functions                                               | lower\_with\_under()                                       | \_lower\_with\_under()                                                   |     |           |                      |                        |
| Global/Class Constants                                  | CAPS\_WITH\_UNDER                                          | \_CAPS\_WITH\_UNDER                                                      |     |           |                      |                        |
| Global/Class Variables                                  | lower\_with\_under                                         | \_lower\_with\_under                                                     |     |           |                      |                        |
| Instance Variables                                      | lower\_with\_under                                         | \_lower\_with\_under (protected) or \_\_lower\_with\_under (private)     |     |           |                      |                        |
| Method Names Function/Method Parameters Local Variables | lower\_with\_under() lower\_with\_under lower\_with\_under | \_lower\_with\_under() (protected) or \_\_lower\_with\_under() (private) |     |           |                      |                        |

**不可使用的名称**

1.  单字符名称, 除了计数器和迭代器；且涉及代码（上下文）行数不超过10行.
2.  包/模块名中的连字符(-)
3.  双下划线开头并结尾的名称(Python保留, 例如\_\_init\_\_)
4.  单词拼写错误
5.  Python内置对象的名称(例如dict，list，bytes等)
6.  涉及业务实体时，使用 *业务实体命名列表* 以外的词汇或缩写
7.  生僻单词
8.  与常用第三方库类似
9.  与真实含义不符的名称

**通用缩写**
* *for* 缩写为 4，*to* 缩写为 2
* *function* 缩写为 fn
* *text* 缩写为 txt
* *count* 缩写为 cnt
* *number* 缩写为 num
* *index* 缩写为 idx
* *length* 缩写为 len

**业务实体命名列表**

为业务实体规范其英文名称的文档

* 产品线级别通用
* 为业务实体指定完整与缩写的词汇
* 涉及业务实体时，必须使用 *业务实体命名列表* 中规定的词汇或缩写

### 变量名规范

##### 完整且准确的表达含义
  * 最好的名称是在不看上下文的情况下，就能准确理解其含义

##### 使用 *业务实体命名列表*
  * 缩写：业务对象的缩写，必须符合约定

##### 使用容易区分的变量名
  * 在同一代码片段中，如果两个变量名可以交换使用而不违反其字面含义，那么就需要修改。以下为反例：
    * 全称与缩写混用：`file_index` 与 `file_idx`
    * 近似名词：`file_index` 与 `file_number`
    * 数字区分：`file1` 与 `file2`

##### 使用后缀表明其数据类型
  * 数据库查询对象：
    * 适用范围：所有使用到数据库查询对象的代码
    * 区别于数据库对象
    * 使用 **_qs** 后缀，取义 query_set
  * 数据库对象：使用 **_obj** 或 **_objs** 后缀
    * 适用范围：所有使用到数据库对象的代码
    * 将数据库对象转换为字典后：使用 **_info** 或 **_infos** 或 **_record** 或 **_records** 后缀
  * 数组：
    * 优选：使用复数表示
    * 可选：使用 **_list** 后缀，当变量不适合复数表示时使用。当函数内需要对其做 list 特有的操作时使用
    * 可选：使用 **_array** 后缀，适用于入参使用。当函数内部仅仅是对其做 for 遍历时使用
  * 字典：
    * 优选：使用复数表示
    * 可选：使用 **_dict** 后缀，当变量不适合复数表示时
  * 可转为json字符串的字典对象：使用 **_json** 后缀
    * 适用范围：所有序列化与反序列化的代码段落
  * json字符串：使用 **_json_str** 后缀
    * 适用范围：所有序列化与反序列化的代码段落
  * 非数据库对象：
    * 优选：有业务意义的名称
    * 可选：使用 **_inst** 后缀
  * 回调类型
    * 优选：有业务意义的名称
    * 可选：回调对象：使用 **_callback** 后缀
    * 可选：回调函数（方法）：使用 **_fn** 后缀
    * 可选：类型：使用 **_class** 后缀
  * 自定义的类型
    * 参数、返回值：使用 *参数注解* 来记录其类型
    * 过程变量：使用有业务意义的名称

##### 使用前缀表明其可访问性

##### 使用单下划线（`_`）来存放该逻辑不使用的变量

##### 不可使用的名称
  * 与作用域以外的变量重名
    * 注意闭包是不需要再次写入参的

## 方法（函数）名规范

##### 谨慎在方法名中使用 `get_` 前缀
  * 确保 `get_` 前缀的方法一定不会修改任何对象状态，且是幂等的
  * 尽可能使用更加符合业务语义的动词，而避免使用 `get_` 这样无特征的动词
